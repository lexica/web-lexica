(function(){"use strict";function c(t){return t!=null&&typeof t=="object"&&t["@@functional/placeholder"]===!0}function l(t){return function e(r){return arguments.length===0||c(r)?e:t.apply(this,arguments)}}function p(t){return function e(r,n){switch(arguments.length){case 0:return e;case 1:return c(r)?e:l(function(u){return t(r,u)});default:return c(r)&&c(n)?e:c(r)?l(function(u){return t(u,n)}):c(n)?l(function(u){return t(r,u)}):t(r,n)}}}function O(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(r){return e.apply(this,arguments)};case 2:return function(r,n){return e.apply(this,arguments)};case 3:return function(r,n,u){return e.apply(this,arguments)};case 4:return function(r,n,u,i){return e.apply(this,arguments)};case 5:return function(r,n,u,i,a){return e.apply(this,arguments)};case 6:return function(r,n,u,i,a,s){return e.apply(this,arguments)};case 7:return function(r,n,u,i,a,s,o){return e.apply(this,arguments)};case 8:return function(r,n,u,i,a,s,o,f){return e.apply(this,arguments)};case 9:return function(r,n,u,i,a,s,o,f,y){return e.apply(this,arguments)};case 10:return function(r,n,u,i,a,s,o,f,y,g){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function A(t,e,r){return function(){for(var n=[],u=0,i=t,a=0,s=!1;a<e.length||u<arguments.length;){var o;a<e.length&&(!c(e[a])||u>=arguments.length)?o=e[a]:(o=arguments[u],u+=1),n[a]=o,c(o)?s=!0:i-=1,a+=1}return!s&&i<=0?r.apply(this,n):O(Math.max(0,i),A(t,n,r))}}var I=p(function(e,r){return e===1?l(r):O(e,A(e,[],r))});function G(t){return function e(r,n,u){switch(arguments.length){case 0:return e;case 1:return c(r)?e:p(function(i,a){return t(r,i,a)});case 2:return c(r)&&c(n)?e:c(r)?p(function(i,a){return t(i,n,a)}):c(n)?p(function(i,a){return t(r,i,a)}):l(function(i){return t(r,n,i)});default:return c(r)&&c(n)&&c(u)?e:c(r)&&c(n)?p(function(i,a){return t(i,a,u)}):c(r)&&c(u)?p(function(i,a){return t(i,n,a)}):c(n)&&c(u)?p(function(i,a){return t(r,i,a)}):c(r)?l(function(i){return t(i,n,u)}):c(n)?l(function(i){return t(r,i,u)}):c(u)?l(function(i){return t(r,n,i)}):t(r,n,u)}}}var k=Array.isArray||function(e){return e!=null&&e.length>=0&&Object.prototype.toString.call(e)==="[object Array]"};function H(t){return t!=null&&typeof t["@@transducer/step"]=="function"}function S(t,e,r){return function(){if(arguments.length===0)return r();var n=arguments[arguments.length-1];if(!k(n)){for(var u=0;u<t.length;){if(typeof n[t[u]]=="function")return n[t[u]].apply(n,Array.prototype.slice.call(arguments,0,-1));u+=1}if(H(n)){var i=e.apply(null,Array.prototype.slice.call(arguments,0,-1));return i(n)}}return r.apply(this,arguments)}}var h={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}};function E(t){for(var e=[],r;!(r=t.next()).done;)e.push(r.value);return e}function x(t,e,r){for(var n=0,u=r.length;n<u;){if(t(e,r[n]))return!0;n+=1}return!1}function J(t){var e=String(t).match(/^function (\w*)/);return e==null?"":e[1]}function d(t,e){return Object.prototype.hasOwnProperty.call(e,t)}function K(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var j=typeof Object.is=="function"?Object.is:K,B=Object.prototype.toString,Q=(function(){return B.call(arguments)==="[object Arguments]"?function(e){return B.call(e)==="[object Arguments]"}:function(e){return d("callee",e)}})(),Y=!{toString:null}.propertyIsEnumerable("toString"),C=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],N=(function(){return arguments.propertyIsEnumerable("length")})(),Z=function(e,r){for(var n=0;n<e.length;){if(e[n]===r)return!0;n+=1}return!1},_=l(typeof Object.keys=="function"&&!N?function(e){return Object(e)!==e?[]:Object.keys(e)}:function(e){if(Object(e)!==e)return[];var r,n,u=[],i=N&&Q(e);for(r in e)d(r,e)&&(!i||r!=="length")&&(u[u.length]=r);if(Y)for(n=C.length-1;n>=0;)r=C[n],d(r,e)&&!Z(u,r)&&(u[u.length]=r),n-=1;return u}),P=l(function(e){return e===null?"Null":e===void 0?"Undefined":Object.prototype.toString.call(e).slice(8,-1)});function b(t,e,r,n){var u=E(t),i=E(e);function a(s,o){return q(s,o,r.slice(),n.slice())}return!x(function(s,o){return!x(a,o,s)},i,u)}function q(t,e,r,n){if(j(t,e))return!0;var u=P(t);if(u!==P(e))return!1;if(typeof t["fantasy-land/equals"]=="function"||typeof e["fantasy-land/equals"]=="function")return typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e)&&typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t);if(typeof t.equals=="function"||typeof e.equals=="function")return typeof t.equals=="function"&&t.equals(e)&&typeof e.equals=="function"&&e.equals(t);switch(u){case"Arguments":case"Array":case"Object":if(typeof t.constructor=="function"&&J(t.constructor)==="Promise")return t===e;break;case"Boolean":case"Number":case"String":if(!(typeof t==typeof e&&j(t.valueOf(),e.valueOf())))return!1;break;case"Date":if(!j(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(!(t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.sticky===e.sticky&&t.unicode===e.unicode))return!1;break}for(var i=r.length-1;i>=0;){if(r[i]===t)return n[i]===e;i-=1}switch(u){case"Map":return t.size!==e.size?!1:b(t.entries(),e.entries(),r.concat([t]),n.concat([e]));case"Set":return t.size!==e.size?!1:b(t.values(),e.values(),r.concat([t]),n.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var a=_(t);if(a.length!==_(e).length)return!1;var s=r.concat([t]),o=n.concat([e]);for(i=a.length-1;i>=0;){var f=a[i];if(!(d(f,e)&&q(e[f],t[f],s,o)))return!1;i-=1}return!0}var ee=p(function(e,r){return q(e,r,[],[])});function te(t,e,r){var n,u;if(typeof t.indexOf=="function")switch(typeof e){case"number":if(e===0){for(n=1/e;r<t.length;){if(u=t[r],u===0&&1/u===n)return r;r+=1}return-1}else if(e!==e){for(;r<t.length;){if(u=t[r],typeof u=="number"&&u!==u)return r;r+=1}return-1}return t.indexOf(e,r);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,r);case"object":if(e===null)return t.indexOf(e,r)}for(;r<t.length;){if(ee(t[r],e))return r;r+=1}return-1}function z(t,e){return te(e,t,0)>=0}function re(t,e){for(var r=0,n=e.length,u=Array(n);r<n;)u[r]=t(e[r]),r+=1;return u}function ne(t){return function(){return!t.apply(this,arguments)}}function F(t,e,r){for(var n=0,u=r.length;n<u;)e=t(e,r[n]),n+=1;return e}function ue(t,e){for(var r=0,n=e.length,u=[];r<n;)t(e[r])&&(u[u.length]=e[r]),r+=1;return u}function ie(t){return Object.prototype.toString.call(t)==="[object Object]"}var ae=(function(){function t(e,r){this.xf=r,this.f=e}return t.prototype["@@transducer/init"]=h.init,t.prototype["@@transducer/result"]=h.result,t.prototype["@@transducer/step"]=function(e,r){return this.f(r)?this.xf["@@transducer/step"](e,r):e},t})();function se(t){return function(e){return new ae(t,e)}}var m=p(S(["fantasy-land/filter","filter"],se,function(t,e){return ie(e)?F(function(r,n){return t(e[n])&&(r[n]=e[n]),r},{},_(e)):ue(t,e)})),oe=p(function(e,r){return m(ne(e),r)}),ce=(function(){function t(e,r){this.xf=r,this.f=e}return t.prototype["@@transducer/init"]=h.init,t.prototype["@@transducer/result"]=h.result,t.prototype["@@transducer/step"]=function(e,r){return this.xf["@@transducer/step"](e,this.f(r))},t})(),fe=function(e){return function(r){return new ce(e,r)}},R=p(S(["fantasy-land/map","map"],fe,function(e,r){switch(Object.prototype.toString.call(r)){case"[object Function]":return I(r.length,function(){return e.call(this,r.apply(this,arguments))});case"[object Object]":return F(function(n,u){return n[u]=e(r[u]),n},{},_(r));default:return re(e,r)}}));function le(t){return Object.prototype.toString.call(t)==="[object String]"}var U=l(function(e){return k(e)?!0:!e||typeof e!="object"||le(e)?!1:e.length===0?!0:e.length>0?e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1):!1}),X=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function pe(t,e,r){return function(u,i,a){if(U(a))return t(u,i,a);if(a==null)return i;if(typeof a["fantasy-land/reduce"]=="function")return e(u,i,a,"fantasy-land/reduce");if(a[X]!=null)return r(u,i,a[X]());if(typeof a.next=="function")return r(u,i,a);if(typeof a.reduce=="function")return e(u,i,a,"reduce");throw new TypeError("reduce: list must be array or iterable")}}function ye(t,e,r){for(var n=0,u=r.length;n<u;){if(e=t["@@transducer/step"](e,r[n]),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n+=1}return t["@@transducer/result"](e)}var he=p(function(e,r){return O(e.length,function(){return e.apply(r,arguments)})});function ge(t,e,r){for(var n=r.next();!n.done;){if(e=t["@@transducer/step"](e,n.value),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n=r.next()}return t["@@transducer/result"](e)}function ve(t,e,r,n){return t["@@transducer/result"](r[n](he(t["@@transducer/step"],t),e))}var de=pe(ye,ve,ge),_e=(function(){function t(e){this.f=e}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(e){return e},t.prototype["@@transducer/step"]=function(e,r){return this.f(e,r)},t})();function me(t){return new _e(t)}var we=G(function(t,e,r){return de(typeof t=="function"?me(t):t,e,r)});function Oe(t){return function e(r){for(var n,u,i,a=[],s=0,o=r.length;s<o;){if(U(r[s]))for(n=e(r[s]),i=0,u=n.length;i<u;)a[a.length]=n[i],i+=1;else a[a.length]=r[s];s+=1}return a}}function Se(t){return t}var je=l(Se),M=(function(){function t(){this._nativeSet=typeof Set=="function"?new Set:null,this._items={}}return t.prototype.add=function(e){return!L(e,!0,this)},t.prototype.has=function(e){return L(e,!1,this)},t})();function L(t,e,r){var n=typeof t,u,i;switch(n){case"string":case"number":return t===0&&1/t===-1/0?r._items["-0"]?!0:(e&&(r._items["-0"]=!0),!1):r._nativeSet!==null?e?(u=r._nativeSet.size,r._nativeSet.add(t),i=r._nativeSet.size,i===u):r._nativeSet.has(t):n in r._items?t in r._items[n]?!0:(e&&(r._items[n][t]=!0),!1):(e&&(r._items[n]={},r._items[n][t]=!0),!1);case"boolean":if(n in r._items){var a=t?1:0;return r._items[n][a]?!0:(e&&(r._items[n][a]=!0),!1)}else return e&&(r._items[n]=t?[!1,!0]:[!0,!1]),!1;case"function":return r._nativeSet!==null?e?(u=r._nativeSet.size,r._nativeSet.add(t),i=r._nativeSet.size,i===u):r._nativeSet.has(t):n in r._items?z(t,r._items[n])?!0:(e&&r._items[n].push(t),!1):(e&&(r._items[n]=[t]),!1);case"undefined":return r._items[n]?!0:(e&&(r._items[n]=!0),!1);case"object":if(t===null)return r._items.null?!0:(e&&(r._items.null=!0),!1);default:return n=Object.prototype.toString.call(t),n in r._items?z(t,r._items[n])?!0:(e&&r._items[n].push(t),!1):(e&&(r._items[n]=[t]),!1)}}var W=l(Oe()),qe=(function(){function t(e,r){this.xf=r,this.f=e,this.set=new M}return t.prototype["@@transducer/init"]=h.init,t.prototype["@@transducer/result"]=h.result,t.prototype["@@transducer/step"]=function(e,r){return this.set.add(this.f(r))?this.xf["@@transducer/step"](e,r):e},t})();function Ae(t){return function(e){return new qe(t,e)}}var Ie=p(S([],Ae,function(t,e){for(var r=new M,n=[],u=0,i,a;u<e.length;)a=e[u],i=t(a),r.add(i)&&n.push(a),u+=1;return n})),ke=Ie(je);const Ee=({callback:t,onlyUnvisitedNeighbors:e},r,n)=>{const u=Ce({...n,width:r.width});class i{}return R(({row:s,column:o})=>{const f=()=>t(r[s][o],{row:s,column:o});return e&&r[s][o].visited?new i:f()},u).filter(s=>!(s instanceof i))};function T(t,e,r){const n=I(3,Ee)(t);return e?r?n(e,r):n(e):n}const xe=(t,e,r)=>{const{width:n}=t;let u=r;for(let i=0;i<n;i++)for(let a=0;a<n;a++)u=e(u,t[i][a],{row:i,column:a});return u},D=t=>{const{width:e}=t,r={width:e};for(let n=0;n<e;n++){r[n]={index:n};for(let u=0;u<e;u++)r[n][u]={...t[n][u]}}return r},Be=({rows:t,columns:e})=>we((r,n)=>[...r,...R(u=>({row:n,column:u}),e)],[],t),Ce=({row:t,column:e,width:r})=>{const n=[t-1,t,t+1],u=m(o=>o>=0&&o<r,n),i=[e-1,e,e+1],a=m(o=>o>=0&&o<r,i),s=Be({rows:u,columns:a});return m(({row:o,column:f})=>!(t===o&&e===f),s)},$=(t,e,r)=>(n,u)=>{const i=`${e}${n.letter}`,a=t.includes(i),s=a?t.filter(y=>y!==i):t,o=a?[i]:[],f=s.filter(y=>y.indexOf(i)===0);if(f.length){const{row:y,column:g}=u,v=D(r);v[y][g].visited=!0;const w=$(f,i,v),V=W(T({callback:w,onlyUnvisitedNeighbors:!0},v,u));return[...o,...V]}return o},Ne=(t,e,r)=>{const n=e.filter(i=>i.length>=r),{foundWords:u}=xe(t,({remainingWords:i,foundWords:a},s,o)=>{if(!i.length)return{remainingWords:i,foundWords:a};const{row:f,column:y}=o;i.includes(s.letter)&&(a.push(s.letter),i.splice(i.indexOf(s.letter),1));const g=D(t);g[f][y].visited=!0;const v=$(i,s.letter,g),w=W(T({callback:v,onlyUnvisitedNeighbors:!0},g,o));return{remainingWords:oe(Pe=>w.includes(Pe),i),foundWords:[...a,...w]}},{remainingWords:n,foundWords:[]});return ke(u)};onmessage=t=>{const{board:e,dictionary:r,minWordLength:n,requestId:u}=t.data;try{const i=Ne(e,r,n);postMessage({result:i,requestId:u})}catch(i){postMessage({error:i,requestId:u})}}})();
